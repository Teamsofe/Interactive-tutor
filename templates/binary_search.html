{% extends 'base.html' %}
{% block title %}Binary Search{% endblock %}
{% block content %}

<div class="text-center">
    <small class="text-muted">Scroll down ↓</small>
</div>

<div class="hero-image mb-2">
    <img src="{{ url_for('static', filename='images/Binary Search.png') }}"
         alt="Binary Search Concept"
         class="img-fluid rounded shadow">
</div>


<div class="container pt-1">
    <h2 class="text-center mb-4">🎈 Understanding Binary Search (The Friendly Way)</h2>
</div>
    <div class="row">
    <!-- LEFT COLUMN -->
        <div class="col-md-6">
        <p>
            Imagine you are searching for a word in a dictionary. Instead of starting from the beginning, you open the middle and decide to go left or right. That’s how Binary Search works!
        </p>
        <p>
            Binary Search is a highly efficient algorithm that finds the target value by repeatedly dividing the search interval in half.
        </p>

        <h4 class="mt-4">📝 Pseudocode</h4>
        <pre class="bg-light p-3 rounded">
Set low = 0, high = n - 1
While low ≤ high:
    mid = (low + high) / 2
    If A[mid] == target:
        Return mid
    Else if A[mid] < target:
        low = mid + 1
    Else:
        high = mid - 1
Return "Not Found"
        </pre>

        <h5 class="mt-4">🧠 Line-by-Line Explanation:</h5>
        <ul>
            <li>Start with the entire sorted list.</li>
            <li>Find the middle element.</li>
            <li>If it matches the target, return it.</li>
            <li>If it's smaller, search the right half; if larger, search the left half.</li>
        </ul>

        <h5 class="mt-4">📌 More Insights</h5>
        <ul>
            <li><strong>Why "Binary"?</strong> The search space is halved in each step, hence the name.</li>
            <li><strong>Efficiency:</strong> Time complexity is O(log n).</li>
            <li><strong>Best Use:</strong> Large sorted datasets.</li>
        </ul>

        <a href="https://www.geeksforgeeks.org/binary-search/" class="d-block mb-3">See More Explanation on Binary Search</a>

        <h5 class="mt-4">🧠 Click the link below to Visualize the Concept:</h5>
        <a href="https://www.cs.usfca.edu/~galles/visualization/Search.html" class="d-block mb-3">Interactive Visualization</a>

        <div class="alert alert-info mt-3">
            💡 <strong>Best For:</strong> Efficiently finding elements in sorted lists.
        </div>

        <a href="{{ url_for('binary_search_quiz') }}" class="btn btn-info mt-3">🧠 Take Quiz on Binary Search</a>
    </div>

    <!-- RIGHT COLUMN -->
    <div class="col-md-6">
        <!-- Audio -->
        <h4 class="mt-4">🎧 Audio Explanation</h4>
        <audio id="binarySearchAudio" controls class="mb-2">
            <source src="{{ url_for('static', filename='audio/audio_4.mp3') }}" type="audio/mpeg">
            Your browser does not support the audio element.
        </audio>
        <button onclick="toggleAudio()" class="btn btn-primary mb-4">Play/Pause Audio Explanation</button>

        <script>
            function toggleAudio() {
                const audio = document.getElementById('binarySearchAudio');
                audio.paused ? audio.play() : audio.pause();
            }
        </script>

        <!-- Videos -->
        <h5>🎥 Watch: Binary Search Explained</h5>
        <div class="d-flex gap-2 mb-4">
            <video width="48%" height="240" controls>
                <source src="{{ url_for('static', filename='videos/Binary_Search 1.mp4') }}" type="video/mp4">
                Your browser does not support the video tag.
            </video>
            <video width="48%" height="240" controls>
                <source src="{{ url_for('static', filename='videos/Binary_Search 2.mp4') }}" type="video/mp4">
                Your browser does not support the video tag.
            </video>
        </div>

        <!-- Simulation -->
        <h5 class="mt-4">🧪 Try Binary Search Simulation</h5>
        <form method="post" action="{{ url_for('binary_search') }}" class="mb-3">
            <label for="numbers">Enter sorted numbers (e.g., 1, 3, 5, 7, 9):</label>
            <input type="text" name="numbers" id="numbers" class="form-control mb-2" required>
            <label for="target">Enter target to find:</label>
            <input type="number" name="target" id="target" class="form-control mb-2" required>
            <button class="btn btn-success" type="submit">Start Simulation</button>
        </form>

        {% if simulation_result %}
        <div class="mt-4">
            <h5>🔍 Simulation Steps</h5>
            <ul>
                {% for step in simulation_result %}
                    <li>{{ step }}</li>
                {% endfor %}
            </ul>
        </div>
        {% endif %}

        <!-- Game -->
        <h4 class="mt-5">🎮 Play Binary Search Game</h4>
        <p>Click the number where you think the middle is. Follow the hints to find the target!</p>

        <div id="binaryGameList" class="d-flex justify-content-center flex-wrap gap-2 mb-3"></div>
        <button onclick="startBinaryGame()" class="btn btn-primary">🎲 Start New Game</button>
        <p id="binaryGameFeedback" class="mt-3 fw-bold"></p>

        <script>
            let list = [];
            let target = null;
            let low = 0;
            let high = 0;

            function startBinaryGame() {
                list = [1, 3, 5, 7, 9, 11, 13, 15];
                target = list[Math.floor(Math.random() * list.length)];
                low = 0;
                high = list.length - 1;
                renderList();
                document.getElementById('binaryGameFeedback').textContent = `🎯 Find the target: ${target}`;
            }

            function renderList() {
                const container = document.getElementById('binaryGameList');
                container.innerHTML = '';
                for (let i = 0; i < list.length; i++) {
                    const btn = document.createElement('button');
                    btn.textContent = list[i];
                    btn.className = 'btn btn-outline-secondary m-1';
                    btn.onclick = () => makeGuess(i);
                    container.appendChild(btn);
                }
            }

            function makeGuess(index) {
                if (low > high) {
                    document.getElementById('binaryGameFeedback').textContent = `💡 Target not found. Try again!`;
                    return;
                }

                const mid = Math.floor((low + high) / 2);
                if (index !== mid) {
                    document.getElementById('binaryGameFeedback').textContent = `❌ Please select the middle element (index ${mid})!`;
                    return;
                }

                if (list[mid] == target) {
                    document.getElementById('binaryGameFeedback').textContent = `🎉 Correct! You found the target ${target} at index ${mid}.`;
                } else if (list[mid] < target) {
                    low = mid + 1;
                    document.getElementById('binaryGameFeedback').textContent = `🔎 ${list[mid]} is too small. Look in the RIGHT half.`;
                } else {
                    high = mid - 1;
                    document.getElementById('binaryGameFeedback').textContent = `🔎 ${list[mid]} is too big. Look in the LEFT half.`;
                }
            }

            // Start game on page load
            window.onload = startBinaryGame;


                .hero-image {
        width: 100%;
        overflow: hidden;
        margin-top: -8px;
        text-align: center;
    }

    .hero-image img {
        max-width: 100%;
        height: auto;
        display: inline-block;
    }

    @media (min-width: 768px) {
        .hero-image img {
            max-height: 400px;
        }
    }
                    }

        </script>
    </div>
</div>
{% endblock %}
